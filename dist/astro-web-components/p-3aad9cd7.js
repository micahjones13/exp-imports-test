function t(t){return t.split("-")[0]}function n(t){return t.split("-")[1]}function e(n){return["top","bottom"].includes(t(n))?"x":"y"}function o(t){return"y"===t?"height":"width"}function r(r,i,l){let{reference:a,floating:c}=r;const s=a.x+a.width/2-c.width/2,u=a.y+a.height/2-c.height/2,f=e(i),d=o(f),m=a[d]/2-c[d]/2,y="x"===f;let p;switch(t(i)){case"top":p={x:s,y:a.y-c.height};break;case"bottom":p={x:s,y:a.y+a.height};break;case"right":p={x:a.x+a.width,y:u};break;case"left":p={x:a.x-c.width,y:u};break;default:p={x:a.x,y:a.y}}switch(n(i)){case"start":p[f]-=m*(l&&y?-1:1);break;case"end":p[f]+=m*(l&&y?-1:1)}return p}function i(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}function l(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function a(t,n){var e;void 0===n&&(n={});const{x:o,y:r,platform:a,rects:c,elements:s,strategy:u}=t,{boundary:f="clippingAncestors",rootBoundary:d="viewport",elementContext:m="floating",altBoundary:y=!1,padding:p=0}=n,g=i(p),w=s[y?"floating"===m?"reference":"floating":m],x=l(await a.getClippingRect({element:null==(e=await(null==a.isElement?void 0:a.isElement(w)))||e?w:w.contextElement||await(null==a.getDocumentElement?void 0:a.getDocumentElement(s.floating)),boundary:f,rootBoundary:d,strategy:u})),v=l(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===m?{...c.floating,x:o,y:r}:c.reference,offsetParent:await(null==a.getOffsetParent?void 0:a.getOffsetParent(s.floating)),strategy:u}):c[m]);return{top:x.top-v.top+g.top,bottom:v.bottom-x.bottom+g.bottom,left:x.left-v.left+g.left,right:v.right-x.right+g.right}}const c=Math.min,s=Math.max,u=t=>({name:"arrow",options:t,async fn(r){const{element:l,padding:a=0}=null!=t?t:{},{x:u,y:f,placement:d,rects:m,platform:y}=r;if(null==l)return{};const p=i(a),g={x:u,y:f},w=e(d),x=n(d),v=o(w),h=await y.getDimensions(l),b="y"===w?"top":"left",A="y"===w?"bottom":"right",R=m.reference[v]+m.reference[w]-g[w]-m.floating[v],P=g[w]-m.reference[w],k=await(null==y.getOffsetParent?void 0:y.getOffsetParent(l));let D=k?"y"===w?k.clientHeight||0:k.clientWidth||0:0;0===D&&(D=m.floating[v]);const T=p[b],z=D-h[v]-p[A],B=D/2-h[v]/2+(R/2-P/2),F=s(T,c(B,z));return{[w]:g[w]-(("start"===x?p[b]:p[A])>0&&B!==F&&m.reference[v]<=m.floating[v]?B<T?T-B:z-B:0),data:{[w]:F,centerOffset:B-F}}}}),f={left:"right",right:"left",bottom:"top",top:"bottom"};function d(t){return t.replace(/left|right|bottom|top/g,(t=>f[t]))}function m(t,r,i){void 0===i&&(i=!1);const l=n(t),a=e(t),c=o(a);let s="x"===a?l===(i?"end":"start")?"right":"left":"start"===l?"bottom":"top";return r.reference[c]>r.floating[c]&&(s=d(s)),{main:s,cross:d(s)}}const y={start:"end",end:"start"};function p(t){return t.replace(/start|end/g,(t=>y[t]))}const g=["top","right","bottom","left"].reduce(((t,n)=>t.concat(n,n+"-start",n+"-end")),[]),w=function(e){return void 0===e&&(e={}),{name:"autoPlacement",options:e,async fn(o){var r,i,l,c,s;const{x:u,y:f,rects:d,middlewareData:y,placement:w,platform:x,elements:v}=o,{alignment:h=null,allowedPlacements:b=g,autoAlignment:A=!0,...R}=e,P=function(e,o,r){return(e?[...r.filter((t=>n(t)===e)),...r.filter((t=>n(t)!==e))]:r.filter((n=>t(n)===n))).filter((t=>!e||n(t)===e||!!o&&p(t)!==t))}(h,A,b),k=await a(o,R),D=null!=(r=null==(i=y.autoPlacement)?void 0:i.index)?r:0,T=P[D];if(null==T)return{};const{main:z,cross:B}=m(T,d,await(null==x.isRTL?void 0:x.isRTL(v.floating)));if(w!==T)return{x:u,y:f,reset:{placement:P[0]}};const F=[k[t(T)],k[z],k[B]],L=[...null!=(l=null==(c=y.autoPlacement)?void 0:c.overflows)?l:[],{placement:T,overflows:F}],M=P[D+1];if(M)return{data:{index:D+1,overflows:L},reset:{placement:M}};const O=L.slice().sort(((t,n)=>t.overflows[0]-n.overflows[0])),S=null==(s=O.find((t=>{let{overflows:n}=t;return n.every((t=>t<=0))})))?void 0:s.placement,C=null!=S?S:O[0].placement;return C!==w?{data:{index:D+1,overflows:L},reset:{placement:C}}:{}}}},x=function(n){return void 0===n&&(n={}),{name:"flip",options:n,async fn(e){var o;const{placement:r,middlewareData:i,rects:l,initialPlacement:c,platform:s,elements:u}=e,{mainAxis:f=!0,crossAxis:y=!0,fallbackPlacements:g,fallbackStrategy:w="bestFit",flipAlignment:x=!0,...v}=n,h=t(r),b=[c,...g||(h!==c&&x?function(t){const n=d(t);return[p(t),n,p(n)]}(c):[d(c)])],A=await a(e,v),R=[];let P=(null==(o=i.flip)?void 0:o.overflows)||[];if(f&&R.push(A[h]),y){const{main:t,cross:n}=m(r,l,await(null==s.isRTL?void 0:s.isRTL(u.floating)));R.push(A[t],A[n])}if(P=[...P,{placement:r,overflows:R}],!R.every((t=>t<=0))){var k,D;const t=(null!=(k=null==(D=i.flip)?void 0:D.index)?k:0)+1,n=b[t];if(n)return{data:{index:t,overflows:P},reset:{placement:n}};let e="bottom";switch(w){case"bestFit":{var T;const t=null==(T=P.map((t=>[t,t.overflows.filter((t=>t>0)).reduce(((t,n)=>t+n),0)])).sort(((t,n)=>t[1]-n[1]))[0])?void 0:T[0].placement;t&&(e=t);break}case"initialPlacement":e=c}if(r!==e)return{reset:{placement:e}}}return{}}}},v=function(o){return void 0===o&&(o=0),{name:"offset",options:o,async fn(r){const{x:i,y:l}=r,a=await async function(o,r){const{placement:i,platform:l,elements:a}=o,c=await(null==l.isRTL?void 0:l.isRTL(a.floating)),s=t(i),u=n(i),f="x"===e(i),d=["left","top"].includes(s)?-1:1,m=c&&f?-1:1,y="function"==typeof r?r(o):r;let{mainAxis:p,crossAxis:g,alignmentAxis:w}="number"==typeof y?{mainAxis:y,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...y};return u&&"number"==typeof w&&(g="end"===u?-1*w:w),f?{x:g*m,y:p*d}:{x:p*d,y:g*m}}(r,o);return{x:i+a.x,y:l+a.y,data:a}}}};function h(t){return t&&t.document&&t.location&&t.alert&&t.setInterval}function b(t){if(null==t)return window;if(!h(t)){const n=t.ownerDocument;return n&&n.defaultView||window}return t}function A(t){return b(t).getComputedStyle(t)}function R(t){return h(t)?"":t?(t.nodeName||"").toLowerCase():""}function P(){const t=navigator.userAgentData;return null!=t&&t.brands?t.brands.map((t=>t.brand+"/"+t.version)).join(" "):navigator.userAgent}function k(t){return t instanceof b(t).HTMLElement}function D(t){return t instanceof b(t).Element}function T(t){return"undefined"!=typeof ShadowRoot&&(t instanceof b(t).ShadowRoot||t instanceof ShadowRoot)}function z(t){const{overflow:n,overflowX:e,overflowY:o,display:r}=A(t);return/auto|scroll|overlay|hidden/.test(n+o+e)&&!["inline","contents"].includes(r)}function B(t){return["table","td","th"].includes(R(t))}function F(t){const n=/firefox/i.test(P()),e=A(t),o=e.backdropFilter||e.WebkitBackdropFilter;return"none"!==e.transform||"none"!==e.perspective||!!o&&"none"!==o||n&&"filter"===e.willChange||n&&!!e.filter&&"none"!==e.filter||["transform","perspective"].some((t=>e.willChange.includes(t)))||["paint","layout","strict","content"].some((t=>{const n=e.contain;return null!=n&&n.includes(t)}))}function L(){return!/^((?!chrome|android).)*safari/i.test(P())}function M(t){return["html","body","#document"].includes(R(t))}const O=Math.min,S=Math.max,C=Math.round;function E(t,n,e){var o,r,i,l;void 0===n&&(n=!1),void 0===e&&(e=!1);const a=t.getBoundingClientRect();let c=1,s=1;n&&k(t)&&(c=t.offsetWidth>0&&C(a.width)/t.offsetWidth||1,s=t.offsetHeight>0&&C(a.height)/t.offsetHeight||1);const u=D(t)?b(t):window,f=!L()&&e,d=(a.left+(f&&null!=(o=null==(r=u.visualViewport)?void 0:r.offsetLeft)?o:0))/c,m=(a.top+(f&&null!=(i=null==(l=u.visualViewport)?void 0:l.offsetTop)?i:0))/s,y=a.width/c,p=a.height/s;return{width:y,height:p,top:m,right:d+y,bottom:m+p,left:d,x:d,y:m}}function j(t){return(n=t,(n instanceof b(n).Node?t.ownerDocument:t.document)||window.document).documentElement;var n}function q(t){return D(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function V(t){return E(j(t)).left+q(t).scrollLeft}function X(t,n,e){const o=k(n),r=j(n),i=E(t,o&&function(t){const n=E(t);return C(n.width)!==t.offsetWidth||C(n.height)!==t.offsetHeight}(n),"fixed"===e);let l={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if(o||!o&&"fixed"!==e)if(("body"!==R(n)||z(r))&&(l=q(n)),k(n)){const t=E(n,!0);a.x=t.x+n.clientLeft,a.y=t.y+n.clientTop}else r&&(a.x=V(r));return{x:i.left+l.scrollLeft-a.x,y:i.top+l.scrollTop-a.y,width:i.width,height:i.height}}function Y(t){if("html"===R(t))return t;const n=t.assignedSlot||t.parentNode||(T(t)?t.host:null)||j(t);return T(n)?n.host:n}function G(t){return k(t)&&"fixed"!==A(t).position?t.offsetParent:null}function H(t){const n=b(t);let e=G(t);for(;e&&B(e)&&"static"===A(e).position;)e=G(e);return e&&("html"===R(e)||"body"===R(e)&&"static"===A(e).position&&!F(e))?n:e||function(t){let n=Y(t);for(;k(n)&&!M(n);){if(F(n))return n;n=Y(n)}return null}(t)||n}function I(t){if(k(t))return{width:t.offsetWidth,height:t.offsetHeight};const n=E(t);return{width:n.width,height:n.height}}function J(t){const n=Y(t);return M(n)?t.ownerDocument.body:k(n)&&z(n)?n:J(n)}function K(t,n){var e;void 0===n&&(n=[]);const o=J(t),r=o===(null==(e=t.ownerDocument)?void 0:e.body),i=b(o),l=r?[i].concat(i.visualViewport||[],z(o)?o:[]):o,a=n.concat(l);return r?a:a.concat(K(l))}function N(t,n,e){return"viewport"===n?l(function(t,n){const e=b(t),o=j(t),r=e.visualViewport;let i=o.clientWidth,l=o.clientHeight,a=0,c=0;if(r){i=r.width,l=r.height;const t=L();(t||!t&&"fixed"===n)&&(a=r.offsetLeft,c=r.offsetTop)}return{width:i,height:l,x:a,y:c}}(t,e)):D(n)?function(t,n){const e=E(t,!1,"fixed"===n),o=e.top+t.clientTop,r=e.left+t.clientLeft;return{top:o,left:r,x:r,y:o,right:r+t.clientWidth,bottom:o+t.clientHeight,width:t.clientWidth,height:t.clientHeight}}(n,e):l(function(t){var n;const e=j(t),o=q(t),r=null==(n=t.ownerDocument)?void 0:n.body,i=S(e.scrollWidth,e.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),l=S(e.scrollHeight,e.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0);let a=-o.scrollLeft+V(t);const c=-o.scrollTop;return"rtl"===A(r||e).direction&&(a+=S(e.clientWidth,r?r.clientWidth:0)-i),{width:i,height:l,x:a,y:c}}(j(t)))}const Q={getClippingRect:function(t){let{element:n,boundary:e,rootBoundary:o,strategy:r}=t;const i=[..."clippingAncestors"===e?function(t){let n=K(t).filter((t=>D(t)&&"body"!==R(t))),e=t,o=null;for(;D(e)&&!M(e);){const t=A(e);"static"===t.position&&o&&["absolute","fixed"].includes(o.position)&&!F(e)?n=n.filter((t=>t!==e)):o=t,e=Y(e)}return n}(n):[].concat(e),o],l=i.reduce(((t,e)=>{const o=N(n,e,r);return t.top=S(o.top,t.top),t.right=O(o.right,t.right),t.bottom=O(o.bottom,t.bottom),t.left=S(o.left,t.left),t}),N(n,i[0],r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:n,offsetParent:e,strategy:o}=t;const r=k(e),i=j(e);if(e===i)return n;let l={scrollLeft:0,scrollTop:0};const a={x:0,y:0};if((r||!r&&"fixed"!==o)&&(("body"!==R(e)||z(i))&&(l=q(e)),k(e))){const t=E(e,!0);a.x=t.x+e.clientLeft,a.y=t.y+e.clientTop}return{...n,x:n.x-l.scrollLeft+a.x,y:n.y-l.scrollTop+a.y}},isElement:D,getDimensions:I,getOffsetParent:H,getDocumentElement:j,getElementRects:t=>{let{reference:n,floating:e,strategy:o}=t;return{reference:X(n,H(e),o),floating:{...I(e),x:0,y:0}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>"rtl"===A(t).direction};function U(t,n,e,o){void 0===o&&(o={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:l=!0,animationFrame:a=!1}=o,c=r&&!a,s=c||i?[...D(t)?K(t):t.contextElement?K(t.contextElement):[],...K(n)]:[];s.forEach((t=>{c&&t.addEventListener("scroll",e,{passive:!0}),i&&t.addEventListener("resize",e)}));let u,f=null;if(l){let o=!0;f=new ResizeObserver((()=>{o||e(),o=!1})),D(t)&&!a&&f.observe(t),D(t)||!t.contextElement||a||f.observe(t.contextElement),f.observe(n)}let d=a?E(t):null;return a&&function n(){const o=E(t);!d||o.x===d.x&&o.y===d.y&&o.width===d.width&&o.height===d.height||e(),d=o,u=requestAnimationFrame(n)}(),e(),()=>{var t;s.forEach((t=>{c&&t.removeEventListener("scroll",e),i&&t.removeEventListener("resize",e)})),null==(t=f)||t.disconnect(),f=null,a&&cancelAnimationFrame(u)}}const W=(t,n,e)=>(async(t,n,e)=>{const{placement:o="bottom",strategy:i="absolute",middleware:l=[],platform:a}=e,c=l.filter(Boolean),s=await(null==a.isRTL?void 0:a.isRTL(n));let u=await a.getElementRects({reference:t,floating:n,strategy:i}),{x:f,y:d}=r(u,o,s),m=o,y={},p=0;for(let e=0;e<c.length;e++){const{name:l,fn:g}=c[e],{x:w,y:x,data:v,reset:h}=await g({x:f,y:d,initialPlacement:o,placement:m,strategy:i,middlewareData:y,rects:u,platform:a,elements:{reference:t,floating:n}});f=null!=w?w:f,d=null!=x?x:d,y={...y,[l]:{...y[l],...v}},h&&p<=50&&(p++,"object"==typeof h&&(h.placement&&(m=h.placement),h.rects&&(u=!0===h.rects?await a.getElementRects({reference:t,floating:n,strategy:i}):h.rects),({x:f,y:d}=r(u,m,s))),e=-1)}return{x:f,y:d,placement:m,strategy:i,middlewareData:y}})(t,n,{platform:Q,...e});export{U as a,w as b,W as c,u as d,x as f,v as o}