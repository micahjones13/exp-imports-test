import{r as e,h as t,H as a,g as r}from"./p-3aed6e85.js";import{d as i}from"./p-4696d9d7.js";import{d as s}from"./p-40490376.js";import"./p-507fde2f.js";const n=class{constructor(t){e(this,t),this.width=0,this.columns=0,this.start="",this.end="",this.timezone="UTC"}handleUpdate(e,t){t&&this.initializeRows()}handleTimezoneUpdate(){this.initializeRows()}handleTimeRegionChange(e){this.initializeRows(),e.stopPropagation()}connectedCallback(){this._handleSlotChange=this._handleSlotChange.bind(this)}_calculateGridColumnFromTime(e){if(this.start){const t=new Date(this.start);if("hour"===this.interval)return Math.abs(i(t,new Date(e)))+2;if("day"===this.interval)return Math.abs(s(t,new Date(e)))+2}return 0}_validateTimeRegion(e,t){return e?t?new Date(e)>new Date(t)?{success:!1,error:`The Time Region start date must be before the end date: ${e} - ${t}`}:new Date(e)>new Date(this.end)?{success:!1,error:`The Time Region start date does not fall within the Timeline's range: ${e} - ${this.start}/${this.end}`}:new Date(e)<new Date(this.start)&&new Date(t)<new Date(this.start)?{success:!1,error:`The Time Region start and end dates do not fall within the Timeline's range: ${e} - ${t}`}:{success:!0}:{success:!1,error:"Time Region must have a end date provided"}:{success:!1,error:"Time Region must have a start date provided"}}initializeRows(){[...this.el.children].filter((e=>"rux-time-region"===e.tagName.toLowerCase())).forEach((e=>{const t="hidden"===e.style.visibility,a=this._validateTimeRegion(e.start,e.end);let r=e.start,i=e.end;if(a.success){e.start<this.start&&e.end>this.end?(e.partial="ongoing",r=this.start,i=this.end):e.start<this.start?(e.partial="start",r=this.start):e.end>this.end?(e.partial="end",i=this.end):e.partial="none",e.timezone=this.timezone,e.style.gridRow="1",e.style.display="block";const t=`${this._calculateGridColumnFromTime(r)} / ${this._calculateGridColumnFromTime(i)}`;e.style.gridColumn=t}else t||(e.style.display="none")}))}_handleSlotChange(){this.initializeRows()}render(){return t(a,null,t("div",{class:"rux-timeline rux-track",style:{gridTemplateColumns:`[header] 200px repeat(${this.columns}, ${this.width}px)`},part:"container"},t("div",{class:"rux-track__header",part:"track-header",style:{gridRow:"1"}},t("slot",{name:"label"})),t("slot",{onSlotchange:this._handleSlotChange})))}get el(){return r(this)}static get watchers(){return{start:["handleUpdate"],end:["handleUpdate"],interval:["handleUpdate"],timezone:["handleTimezoneUpdate"]}}};n.style=".rux-track{background:var(--color-background-surface-default);width:fit-content;border-bottom:2px solid var(--color-background-base-default)}.rux-track__header{box-sizing:border-box;padding:11px 8px 13px 8px;background:var(--color-background-surface-default);border-right:2px solid var(--color-background-base-default);display:flex;align-items:center;font-family:var(--font-body-1-font-family);font-size:var(--font-body-1-font-size);font-weight:var(--font-body-1-font-weight);letter-spacing:var(--font-body-1-letter-spacing);position:sticky;left:0;min-width:184px;z-index:2}.rux-timeline{scrollbar-color:var(--color-border-interactive-muted);position:relative;display:grid;grid-template-rows:auto;background:var(--color-background-surface-default)}";export{n as rux_track}